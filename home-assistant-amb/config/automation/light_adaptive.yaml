- alias: "Adaptive light: toggle"
  id: "adaptive-light-toggle"
  trigger:
    - platform: state
      entity_id: input_boolean.adaptive_lighting
    - platform: homeassistant
      event: start  # in case the states aren't properly restored
  variables:
    new_state: "{{ states('input_boolean.adaptive_lighting') }}"
  action:
    - service: "switch.turn_{{ new_state }}"
      entity_id:
        - switch.adaptive_lighting_hall_0_spot
        - switch.adaptive_lighting_hall_0_wall
        - switch.adaptive_lighting_toilet
        - switch.adaptive_lighting_living_spot
        - switch.adaptive_lighting_living_white_cabinet
        - switch.adaptive_lighting_stair_cabinet
        - switch.adaptive_lighting_dining_table
        - switch.adaptive_lighting_kitchen_middle
        - switch.adaptive_lighting_kitchen_countertop
        - switch.adaptive_lighting_bathroom
        - switch.adaptive_lighting_bedroom_duco_ambiance
        - switch.adaptive_lighting_bedroom_duco_color
        - switch.adaptive_lighting_bedroom_olivier_ambiance
        - switch.adaptive_lighting_bedroom_olivier_color
  mode: restart
